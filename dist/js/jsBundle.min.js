!function(){"use strict";function e(e,t,n,o){e.state("Home",{url:"/",templateUrl:"/templates/home.html",controller:"HomeController as vm"}).state("Profile",{url:"/profile/:id",templateUrl:"/templates/profile.html",controller:"ProfileController as ProCon"}).state("Icon",{url:"/icon/:id",templateUrl:"/templates/icon.html",controller:"IconDetailsController as vm"}),n.caseInsensitive(!0),n.strictMode(!1),o.html5Mode(!0),t.otherwise("/")}angular.module("app",["ui.router","ngMaterial"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"]}(),function(){"use strict";function e(e,n,o,i,l){var c=this;c.user={},c.status=e.status,c.register=function(l){o.show({controller:t,templateUrl:"/templates/modals/register.html",parent:angular.element(document.body),targetEvent:l,clickOutsideToClose:!0}).then(function(t){e.register(t).then(function(e){i.loginprompt="animated bounceOutLeft",i.yousuck="animated bounceInRight",c.ding(),n.go("Home")})})},c.login=function(l){o.show({controller:t,templateUrl:"/templates/modals/login.html",parent:angular.element(document.body),targetEvent:l,clickOutsideToClose:!0}).then(function(t){e.login(t).then(function(e){i.loginprompt="animated bounceOutLeft",i.yousuck="animated bounceInRight",c.ding(),n.go("Home")})})},c.logout=function(){e.removeToken(),i.yousuck="animated bounceOutLeft",i.loginprompt="animated bounceInRight"},c.loginSFX=function(){document.getElementById("loginSFX").play()},c.registerSFX=function(){document.getElementById("registerSFX").play()},c.swoosh=function(){document.getElementById("swoosh").play()},c.logoutSFX=function(){document.getElementById("logout").play()},c.ding=function(){document.getElementById("ding").play()}}function t(e,t){e.reglog=function(){t.hide(e.user)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("GlobalController",e).controller("LogRegController",t),e.$inject=["UserFactory","$state","$mdDialog","$scope","$animate"],t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function e(e,o,i,l,c,r){var a=this;a.icon={},i.getAllIcons().then(function(t){a.icons=t,e.newbutt="animated swing highlight regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="regButt"}),a.addIcon=function(e){c.show({controller:t,templateUrl:"/templates/modals/addIcon.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){i.addIcon(e).then(function(e){e.createdBy={},e.createdBy._id=l.status._id,e.createdBy.username=l.status.username,e.createdBy&&document.getElementById("addSuccess").play(),a.icons.unshift(e),a.icon=e})})},a.deleteIcon=function(e){a.icons.splice(a.icons.indexOf(e),1),i.deleteIcon(e._id).then(function(e){a["delete"]()})},a.editModal=function(e,t){c.show({controller:n,templateUrl:"/templates/modals/editIconModal.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,locals:{icon:t}}).then(function(e){i.updateIcon(e,t).then(function(n){a.editSuccess(),a.icons[a.icons.indexOf(t)]=e})})},a.like=function(e){if(l.status._id||r.show(r.simple().content("You must login to like icons!").position("top left").hideDelay(3e3)),l.status._id)for(var t=0;t<e.likers.length;t++){if(e.likers[t]==l.status._id)return console.log("already liked");if(t+1>=e.likers.length)return console.log("in else if"),void i.like(e._id).then(function(t){e.likes++,e.likers.push(l.status._id),a.likeSFX(),console.log("like saved")})}},a.editSuccess=function(){document.getElementById("addSuccess").play()},a.addIconSFX=function(){document.getElementById("addIconSFX").play()},a.shuffle=function(){document.getElementById("shuffle").play()},a["delete"]=function(){document.getElementById("delete").play()},a.likeSFX=function(){document.getElementById("like").play()},a.editSound=function(){document.getElementById("addIconSFX").play()},a.newest=function(){e.newbutt="animated swing highlight regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="regButt",a.icons.sort(function(e,t){return new Date(t.dateCreated)-new Date(e.dateCreated)})},a.oldest=function(){e.newbutt="regButt",e.oldbutt="animated swing highlight regButt",e.likebutt="regButt",e.combutt="regButt",a.icons.sort(function(e,t){return new Date(e.dateCreated)-new Date(t.dateCreated)})},a.mostLikes=function(){e.newbutt="regButt",e.oldbutt="regButt",e.likebutt="animated swing highlight regButt",e.combutt="regButt",a.icons.sort(function(e,t){return t.likers.length-e.likers.length})},a.mostDiscussed=function(){e.newbutt="regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="animated swing highlight regButt",a.icons.sort(function(e,t){return t.comments.length-e.comments.length})}}function t(e,t){e.colors=["#e01f1f","#e09728","#f0e11c","#2ddd34","#1be7e7","#1d36df","#8a0cfa","#e423dd"],e.colorNames=["Red","Orange","Yellow","Green","Teal","Blue","Purple","Pink"],e.submit=function(){t.hide(e.icon)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}function n(e,t,n){e.colors=["#e01f1f","#e09728","#f0e11c","#2ddd34","#1be7e7","#1d36df","#8a0cfa","#e423dd"],e.icon=angular.copy(n),e.update=function(){t.hide(e.icon)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("HomeController",e).controller("ModalController",t).controller("EMController",n),e.$inject=["$scope","$state","HomeFactory","UserFactory","$mdDialog","$mdToast"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","icon"]}(),function(){"use strict";function e(e,n,o,i,l){var c=this;e.id||n.go("Home"),o.getIconById(e.id).then(function(e){c.icon=e}),c.addComment=function(){o.addComment(c.icon._id,c.comment).then(function(e){console.log(e),e.user=i.status._id,c.icon.comments.push(e),c.comment=null,c.success()})},c.deleteComment=function(e){c.icon.comments.splice(c.icon.comments.indexOf(e),1),o.deleteComment(e._id).then(function(e){c["delete"]()})},c.editCom=function(e,n){l.show({controller:t,templateUrl:"/templates/modals/editCom.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,locals:{comment:n}}).then(function(e){o.editCom(e,n).then(function(t){c.icon.comments[c.icon.comments.indexOf(n)]=e,c.success()})})},c.success=function(){document.getElementById("success").play()},c["delete"]=function(){document.getElementById("delete").play()},c.editSound=function(){document.getElementById("addIconSFX").play()}}function t(e,t,n){e.comment=angular.copy(n),e.editCom=function(){t.hide(e.comment)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("IconDetailsController",e).controller("EditComController",t),e.$inject=["$stateParams","$state","CommentFactory","UserFactory","$mdDialog"],t.$inject=["$scope","$mdDialog","comment"]}(),function(){"use strict";function e(){}angular.module("app").controller("ProfileController",e)}(),function(){"use strict";function e(e,t,n){var o={};return o.getIconById=function(n){var o=t.defer();return e.get("/api/v1/comments/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.addComment=function(o,i){var l=t.defer();return e.post("/api/v1/comments/"+o,i,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){l.resolve(e.data)}),l.promise},o.deleteComment=function(n){var o=t.defer();return e["delete"]("/api/v1/comments/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.editCom=function(n,o){var i=t.defer();return e.put("/api/v1/comments/"+o._id,n).then(function(e){i.resolve(e.data)}),i.promise},o}angular.module("app").factory("CommentFactory",e),e.$inject=["$http","$q","$window"]}(),function(){"use strict";function e(e,t,n){var o={};return o.getAllIcons=function(){var n=t.defer();return e.get("/api/v1/icons").then(function(e){n.resolve(e.data)}),n.promise},o.addIcon=function(o){var i=t.defer();return e.post("/api/v1/icons",o,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){i.resolve(e.data)}),i.promise},o.deleteIcon=function(n){var o=t.defer();return e["delete"]("/api/v1/icons/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.updateIcon=function(n,o){var i=t.defer();return e.put("/api/v1/icons/"+o._id,n).then(function(e){i.resolve(e.data)}),i.promise},o.like=function(o){var i=t.defer();return e.put("/api/v1/icons/like/"+o,null,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){i.resolve(e.data)}),i.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q","$window"]}(),function(){"use strict";function e(e,t,n){var o={};return o.status={},o.register=function(n){var i=t.defer();return e.post("/api/v1/users/register",n).then(function(e){o.setToken(e.data.token),i.resolve(e.data)}),i.promise},o.login=function(n){var i=t.defer();return e.post("/api/v1/users/login",n).then(function(e){o.setToken(e.data.token),i.resolve(e.data)}),i.promise},o.getToken=function(){return n.localStorage.getItem("token")},o.setToken=function(e){n.localStorage.setItem("token",e),o.setUser()},o.removeToken=function(){n.localStorage.removeItem("token"),o.status._id=null,o.status.email=null,o.status.username=null},o.setUser=function(){var e=JSON.parse(atob(o.getToken().split(".")[1]));o.status._id=e._id,o.status.email=e.email,o.status.username=e.username},o.getToken()&&o.setUser(),o}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q","$window"]}();