!function(){"use strict";function e(e,t,n,o){e.state("Home",{url:"/",templateUrl:"/templates/home.html",controller:"HomeController as vm"}).state("Profile",{url:"/profile/:id",templateUrl:"/templates/profile.html",controller:"ProfileController as ProCon"}).state("Icon",{url:"/icon/:id",templateUrl:"/templates/icon.html",controller:"IconDetailsController as vm"}),n.caseInsensitive(!0),n.strictMode(!1),o.html5Mode(!0),t.otherwise("/")}angular.module("app",["ui.router","ngMaterial"]).config(e),e.$inject=["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"]}(),function(){"use strict";function e(e,n,o,i,c){var l=this;l.user={},l.status=e.status,l.register=function(c){o.show({controller:t,templateUrl:"/templates/modals/register.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(t){e.register(t).then(function(e){i.loginprompt="animated bounceOutLeft",i.yousuck="animated bounceInRight",l.ding(),n.go("Home")})})},l.login=function(c){o.show({controller:t,templateUrl:"/templates/modals/login.html",parent:angular.element(document.body),targetEvent:c,clickOutsideToClose:!0}).then(function(t){e.login(t).then(function(e){i.loginprompt="animated bounceOutLeft",i.yousuck="animated bounceInRight",l.ding(),n.go("Home")})})},l.logout=function(){e.removeToken(),i.yousuck="animated bounceOutLeft",i.loginprompt="animated bounceInRight"},l.loginSFX=function(){document.getElementById("loginSFX").play()},l.registerSFX=function(){document.getElementById("registerSFX").play()},l.swoosh=function(){document.getElementById("swoosh").play()},l.logoutSFX=function(){document.getElementById("logout").play()},l.ding=function(){document.getElementById("ding").play()}}function t(e,t){e.reglog=function(){t.hide(e.user)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("GlobalController",e).controller("LogRegController",t),e.$inject=["UserFactory","$state","$mdDialog","$scope","$animate"],t.$inject=["$scope","$mdDialog"]}(),function(){"use strict";function e(e,o,i,c,l,u){var r=this;r.icon={},i.getAllIcons().then(function(t){r.icons=t,e.newbutt="animated swing highlight regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="regButt"}),r.refresh=function(){i.refresh().then(function(e){i.getAllIcons.then(function(e){r.icons=e})})},r.addIcon=function(e){l.show({controller:t,templateUrl:"/templates/modals/addIcon.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0}).then(function(e){i.addIcon(e).then(function(e){e.createdBy={},e.createdBy._id=c.status._id,e.createdBy.username=c.status.username,e.createdBy&&document.getElementById("addSuccess").play(),r.icons.unshift(e),r.icon=e})})},r.deleteIcon=function(e){r.icons.splice(r.icons.indexOf(e),1),i.deleteIcon(e._id).then(function(e){r["delete"]()})},r.editModal=function(e,t){l.show({controller:n,templateUrl:"/templates/modals/editIconModal.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,locals:{icon:t}}).then(function(e){i.updateIcon(e,t).then(function(n){r.editSuccess(),r.icons[r.icons.indexOf(t)]=e})})},r.like=function(e){if(c.status._id||u.show(u.simple().content("You must login to like icons!").position("top left").hideDelay(3e3)),c.status._id)for(var t=0;t<e.likers.length;t++){if(e.likers[t]==c.status._id)return console.log("already liked");if(t+1>=e.likers.length)return console.log("in else if"),void i.like(e._id).then(function(t){e.likes++,e.likers.push(c.status._id),r.likeSFX(),console.log("like saved")})}},r.editSuccess=function(){document.getElementById("addSuccess").play()},r.addIconSFX=function(){document.getElementById("addIconSFX").play()},r.shuffle=function(){document.getElementById("shuffle").play()},r["delete"]=function(){document.getElementById("delete").play()},r.likeSFX=function(){document.getElementById("like").play()},r.editSound=function(){document.getElementById("addIconSFX").play()},r.newest=function(){e.tile="animated bounceOut",e.newbutt="animated swing highlight regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="regButt",setTimeout(function(){r.icons=null},250),setTimeout(function(){i.getAllIcons().then(function(t){r.icons=t,e.tile="animated bounceIn"})},500)},r.oldest=function(){e.tile="animated bounceOut",e.newbutt="regButt",e.oldbutt="animated swing highlight regButt",e.likebutt="regButt",e.combutt="regButt",setTimeout(function(){r.icons=null},250),setTimeout(function(){i.mostDiscussed().then(function(t){r.icons=t,e.tile="animated bounceIn"})},500)},r.mostLikes=function(){e.tile="animated bounceOut",e.newbutt="regButt",e.oldbutt="regButt",e.likebutt="animated swing highlight regButt",e.combutt="regButt",setTimeout(function(){r.icons=null},250),setTimeout(function(){i.mostLikes().then(function(t){r.icons=t,e.tile="animated bounceIn"})},500)},r.mostDiscussed=function(){e.tile="animated bounceOut",e.newbutt="regButt",e.oldbutt="regButt",e.likebutt="regButt",e.combutt="animated swing highlight regButt",setTimeout(function(){r.icons=null},250),setTimeout(function(){i.mostDiscussed().then(function(t){r.icons=t,e.tile="animated bounceIn"})},500)}}function t(e,t){e.colors=["#e01f1f","#e09728","#f0e11c","#2ddd34","#1be7e7","#1d36df","#8a0cfa","#e423dd"],e.colorNames=["Red","Orange","Yellow","Green","Teal","Blue","Purple","Pink"],e.submit=function(){t.hide(e.icon)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}function n(e,t,n){e.colors=["#e01f1f","#e09728","#f0e11c","#2ddd34","#1be7e7","#1d36df","#8a0cfa","#e423dd"],e.icon=angular.copy(n),e.update=function(){t.hide(e.icon)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("HomeController",e).controller("ModalController",t).controller("EMController",n),e.$inject=["$scope","$state","HomeFactory","UserFactory","$mdDialog","$mdToast"],t.$inject=["$scope","$mdDialog"],n.$inject=["$scope","$mdDialog","icon"]}(),function(){"use strict";function e(e,n,o,i,c){var l=this;e.id||n.go("Home"),o.getIconById(e.id).then(function(e){l.icon=e}),l.addComment=function(){o.addComment(l.icon._id,l.comment).then(function(e){console.log(e),e.user=i.status._id,l.icon.comments.push(e),l.comment=null,l.success()})},l.deleteComment=function(e){l.icon.comments.splice(l.icon.comments.indexOf(e),1),o.deleteComment(e._id).then(function(e){l["delete"]()})},l.editCom=function(e,n){c.show({controller:t,templateUrl:"/templates/modals/editCom.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!0,locals:{comment:n}}).then(function(e){o.editCom(e,n).then(function(t){l.icon.comments[l.icon.comments.indexOf(n)]=e,l.success()})})},l.success=function(){document.getElementById("success").play()},l["delete"]=function(){document.getElementById("delete").play()},l.editSound=function(){document.getElementById("addIconSFX").play()}}function t(e,t,n){e.comment=angular.copy(n),e.editCom=function(){t.hide(e.comment)},e.cancel=function(){t.cancel(),document.getElementById("close").play()}}angular.module("app").controller("IconDetailsController",e).controller("EditComController",t),e.$inject=["$stateParams","$state","CommentFactory","UserFactory","$mdDialog"],t.$inject=["$scope","$mdDialog","comment"]}(),function(){"use strict";function e(){}angular.module("app").controller("ProfileController",e)}(),function(){"use strict";function e(e,t,n){var o={};return o.getIconById=function(n){var o=t.defer();return e.get("/api/v1/comments/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.addComment=function(o,i){var c=t.defer();return e.post("/api/v1/comments/"+o,i,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){c.resolve(e.data)}),c.promise},o.deleteComment=function(n){var o=t.defer();return e["delete"]("/api/v1/comments/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.editCom=function(n,o){var i=t.defer();return e.put("/api/v1/comments/"+o._id,n).then(function(e){i.resolve(e.data)}),i.promise},o}angular.module("app").factory("CommentFactory",e),e.$inject=["$http","$q","$window"]}(),function(){"use strict";function e(e,t,n){var o={};return o.getAllIcons=function(){var n=t.defer();return e.get("/api/v1/icons").then(function(e){n.resolve(e.data)}),n.promise},o.addIcon=function(o){var i=t.defer();return e.post("/api/v1/icons",o,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){i.resolve(e.data)}),i.promise},o.deleteIcon=function(n){var o=t.defer();return e["delete"]("/api/v1/icons/"+n).then(function(e){o.resolve(e.data)}),o.promise},o.updateIcon=function(n,o){var i=t.defer();return e.put("/api/v1/icons/"+o._id,n).then(function(e){i.resolve(e.data)}),i.promise},o.like=function(o){var i=t.defer();return e.put("/api/v1/icons/like/"+o,null,{headers:{authorization:"Bearer "+n.localStorage.getItem("token")}}).then(function(e){i.resolve(e.data)}),i.promise},o.refresh=function(){var n=t.defer();return e.put("/api/v1/icons/refresh").then(function(e){n.resolve(e.data)}),n.promise},o.mostLikes=function(){var n=t.defer();return e.get("/api/v1/icons/mostLikes").then(function(e){n.resolve(e.data)}),n.promise},o.mostDiscussed=function(){var n=t.defer();return e.get("/api/v1/icons/mostDiscussed").then(function(e){n.resolve(e.data)}),n.promise},o.oldest=function(){var n=t.defer();return e.get("/api/v1/icons/oldest").then(function(e){n.resolve(e.data)}),n.promise},o}angular.module("app").factory("HomeFactory",e),e.$inject=["$http","$q","$window"]}(),function(){"use strict";function e(e,t,n){var o={};return o.status={},o.register=function(n){var i=t.defer();return e.post("/api/v1/users/register",n).then(function(e){o.setToken(e.data.token),i.resolve(e.data)}),i.promise},o.login=function(n){var i=t.defer();return e.post("/api/v1/users/login",n).then(function(e){o.setToken(e.data.token),i.resolve(e.data)}),i.promise},o.getToken=function(){return n.localStorage.getItem("token")},o.setToken=function(e){n.localStorage.setItem("token",e),o.setUser()},o.removeToken=function(){n.localStorage.removeItem("token"),o.status._id=null,o.status.email=null,o.status.username=null},o.setUser=function(){var e=JSON.parse(atob(o.getToken().split(".")[1]));o.status._id=e._id,o.status.email=e.email,o.status.username=e.username},o.getToken()&&o.setUser(),o}angular.module("app").factory("UserFactory",e),e.$inject=["$http","$q","$window"]}();